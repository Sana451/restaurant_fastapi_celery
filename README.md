# restaurant_fastapi_celery
Проект на FastAPI, Redis, Celery и PostgreSQL. 
В проекте реализовано REST API по работе с меню ресторана (CRUD операции).
Для проверки API к проекту прилагается Postman коллекция с тестами:    
+ POSTMAN коллекция: https://zenclass-files-hot-01.storage.yandexcloud.net/6cae3bf9-46c7-4a1d-8685-aa4172549365.json   
+ POSTMAN окружение: https://zenclass-files-hot-01.storage.yandexcloud.net/ec49def0-b1af-421c-9808-96a29679bcb2.json
## Подробное описание проекта
3 сущности: меню, подменю, блюдо.   
### Зависимости:
* у меню есть подменю, которые к ней привязаны.
* у подменю есть блюда.
### Условия:
+ блюдо не может быть привязано напрямую к меню, минуя подменю.
+ блюдо не может находиться в 2-х подменю одновременно.
+ подменю не может находиться в 2-х меню одновременно.
+ если удалить меню, должны удалиться все подменю и блюда этого меню.
+ если удалить подменю, должны удалиться все блюда этого подменю.
+ цены блюд выводить с округлением до 2 знаков после запятой.
+ во время выдачи списка меню, для каждого меню добавлять кол-во подменю и блюд в этом меню.
+ во время выдачи списка подменю, для каждого подменю добавлять кол-во блюд в этом подменю.
+ во время запуска тестового сценария БД должна быть пуста.
### Дополнительный функционал
1. Написаны CRUD тесты для разработанного API с помощью библиотеки pytest.
2. Бизнес логика и запросы в БД в вынесены в отдельные слои приложения.
3. Добавлено кэширование запросов к API с использованием Redis.
4. Добавлена в проект фоновая задача с помощью Celery + RabbitMQ.

# Инструкция по развёртыванию
Скачать исходный код проекта: `git clone https://github.com/Sana451/restaurant_fastapi_celery.git`    
Перейти в папку с проектом: `cd restaurant_fastapi_celery/`    
Произвести сборку проекта: `docker compose build`    
Создать и запустить контейнеры: `docker compose up`    

### Проверка работы API
Запустить тесты POSTMAN или тестировать API вручную    
[Swagger автоматическая документация: http://127.0.0.1:8000/docs#/](http://127.0.0.1:8000/docs#/)